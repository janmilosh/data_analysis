// parse a spec and create a visualization view
var line_spec = {
  "axes": [
    {
      "properties": {
        "labels": {
          "angle": {
            "value": 45
          }
        }
      },
      "scale": "x",
      "title": "Date",
      "type": "x"
    },
    {
      "scale": "y",
      "title": "Daily High",
      "type": "y"
    }
  ],
  "data": [
    {
      "name": "table",
      "values": [
        {
          "col": "High",
          "idx": 1388638800000,
          "val": 152.48
        },
        {
          "col": "High",
          "idx": 1388725200000,
          "val": 152.19
        },
        {
          "col": "High",
          "idx": 1388984400000,
          "val": 150.4
        },
        {
          "col": "High",
          "idx": 1389070800000,
          "val": 150.4
        },
        {
          "col": "High",
          "idx": 1389157200000,
          "val": 153.7
        },
        {
          "col": "High",
          "idx": 1389243600000,
          "val": 153.43
        },
        {
          "col": "High",
          "idx": 1389330000000,
          "val": 148.9
        },
        {
          "col": "High",
          "idx": 1389589200000,
          "val": 147.0
        },
        {
          "col": "High",
          "idx": 1389675600000,
          "val": 162.0
        },
        {
          "col": "High",
          "idx": 1389762000000,
          "val": 172.23
        },
        {
          "col": "High",
          "idx": 1389848400000,
          "val": 172.7
        },
        {
          "col": "High",
          "idx": 1389934800000,
          "val": 173.2
        },
        {
          "col": "High",
          "idx": 1390280400000,
          "val": 177.29
        },
        {
          "col": "High",
          "idx": 1390366800000,
          "val": 180.32
        },
        {
          "col": "High",
          "idx": 1390453200000,
          "val": 182.38
        },
        {
          "col": "High",
          "idx": 1390539600000,
          "val": 180.48
        },
        {
          "col": "High",
          "idx": 1390798800000,
          "val": 177.92
        },
        {
          "col": "High",
          "idx": 1390885200000,
          "val": 178.98
        },
        {
          "col": "High",
          "idx": 1390971600000,
          "val": 179.09
        },
        {
          "col": "High",
          "idx": 1391058000000,
          "val": 184.78
        },
        {
          "col": "High",
          "idx": 1391144400000,
          "val": 186.0
        },
        {
          "col": "High",
          "idx": 1391403600000,
          "val": 184.88
        },
        {
          "col": "High",
          "idx": 1391490000000,
          "val": 181.6
        },
        {
          "col": "High",
          "idx": 1391576400000,
          "val": 180.59
        },
        {
          "col": "High",
          "idx": 1391662800000,
          "val": 180.11
        },
        {
          "col": "High",
          "idx": 1391749200000,
          "val": 186.63
        },
        {
          "col": "High",
          "idx": 1392008400000,
          "val": 199.3
        },
        {
          "col": "High",
          "idx": 1392094800000,
          "val": 202.2
        },
        {
          "col": "High",
          "idx": 1392181200000,
          "val": 198.27
        },
        {
          "col": "High",
          "idx": 1392267600000,
          "val": 202.72
        },
        {
          "col": "High",
          "idx": 1392354000000,
          "val": 201.88
        },
        {
          "col": "High",
          "idx": 1392699600000,
          "val": 206.0
        },
        {
          "col": "High",
          "idx": 1392786000000,
          "val": 203.7
        },
        {
          "col": "High",
          "idx": 1392872400000,
          "val": 215.21
        },
        {
          "col": "High",
          "idx": 1392958800000,
          "val": 213.98
        },
        {
          "col": "High",
          "idx": 1393218000000,
          "val": 218.36
        },
        {
          "col": "High",
          "idx": 1393304400000,
          "val": 259.2
        },
        {
          "col": "High",
          "idx": 1393390800000,
          "val": 265.0
        },
        {
          "col": "High",
          "idx": 1393477200000,
          "val": 261.9
        },
        {
          "col": "High",
          "idx": 1393563600000,
          "val": 252.68
        },
        {
          "col": "High",
          "idx": 1393822800000,
          "val": 251.65
        },
        {
          "col": "High",
          "idx": 1393909200000,
          "val": 260.0
        },
        {
          "col": "High",
          "idx": 1393995600000,
          "val": 256.99
        },
        {
          "col": "High",
          "idx": 1394082000000,
          "val": 257.5
        },
        {
          "col": "High",
          "idx": 1394168400000,
          "val": 254.85
        },
        {
          "col": "High",
          "idx": 1394424000000,
          "val": 243.0
        },
        {
          "col": "High",
          "idx": 1394510400000,
          "val": 244.6
        },
        {
          "col": "High",
          "idx": 1394596800000,
          "val": 247.5
        },
        {
          "col": "High",
          "idx": 1394683200000,
          "val": 244.19
        },
        {
          "col": "High",
          "idx": 1394769600000,
          "val": 236.94
        },
        {
          "col": "High",
          "idx": 1395028800000,
          "val": 237.93
        },
        {
          "col": "High",
          "idx": 1395115200000,
          "val": 241.5
        },
        {
          "col": "High",
          "idx": 1395201600000,
          "val": 241.55
        },
        {
          "col": "High",
          "idx": 1395288000000,
          "val": 239.25
        },
        {
          "col": "High",
          "idx": 1395374400000,
          "val": 236.2
        },
        {
          "col": "High",
          "idx": 1395633600000,
          "val": 229.9
        },
        {
          "col": "High",
          "idx": 1395720000000,
          "val": 227.05
        },
        {
          "col": "High",
          "idx": 1395806400000,
          "val": 222.6
        },
        {
          "col": "High",
          "idx": 1395892800000,
          "val": 213.6
        },
        {
          "col": "High",
          "idx": 1395979200000,
          "val": 216.72
        },
        {
          "col": "High",
          "idx": 1396238400000,
          "val": 216.75
        },
        {
          "col": "High",
          "idx": 1396324800000,
          "val": 218.16
        },
        {
          "col": "High",
          "idx": 1396411200000,
          "val": 230.89
        },
        {
          "col": "High",
          "idx": 1396497600000,
          "val": 235.73
        },
        {
          "col": "High",
          "idx": 1396584000000,
          "val": 228.27
        },
        {
          "col": "High",
          "idx": 1396843200000,
          "val": 216.2
        },
        {
          "col": "High",
          "idx": 1396929600000,
          "val": 216.49
        },
        {
          "col": "High",
          "idx": 1397016000000,
          "val": 218.45
        },
        {
          "col": "High",
          "idx": 1397102400000,
          "val": 217.5
        },
        {
          "col": "High",
          "idx": 1397188800000,
          "val": 207.0
        },
        {
          "col": "High",
          "idx": 1397448000000,
          "val": 208.44
        },
        {
          "col": "High",
          "idx": 1397534400000,
          "val": 199.29
        },
        {
          "col": "High",
          "idx": 1397620800000,
          "val": 199.99
        },
        {
          "col": "High",
          "idx": 1397707200000,
          "val": 202.29
        },
        {
          "col": "High",
          "idx": 1398052800000,
          "val": 206.2
        },
        {
          "col": "High",
          "idx": 1398139200000,
          "val": 219.33
        },
        {
          "col": "High",
          "idx": 1398225600000,
          "val": 216.74
        },
        {
          "col": "High",
          "idx": 1398312000000,
          "val": 212.8
        },
        {
          "col": "High",
          "idx": 1398398400000,
          "val": 206.7
        },
        {
          "col": "High",
          "idx": 1398657600000,
          "val": 203.79
        },
        {
          "col": "High",
          "idx": 1398744000000,
          "val": 207.15
        },
        {
          "col": "High",
          "idx": 1398830400000,
          "val": 208.16
        },
        {
          "col": "High",
          "idx": 1398916800000,
          "val": 214.02
        },
        {
          "col": "High",
          "idx": 1399003200000,
          "val": 211.36
        },
        {
          "col": "High",
          "idx": 1399262400000,
          "val": 217.69
        },
        {
          "col": "High",
          "idx": 1399348800000,
          "val": 218.66
        },
        {
          "col": "High",
          "idx": 1399435200000,
          "val": 210.2
        },
        {
          "col": "High",
          "idx": 1399521600000,
          "val": 194.4
        },
        {
          "col": "High",
          "idx": 1399608000000,
          "val": 183.4
        },
        {
          "col": "High",
          "idx": 1399867200000,
          "val": 187.19
        },
        {
          "col": "High",
          "idx": 1399953600000,
          "val": 191.34
        },
        {
          "col": "High",
          "idx": 1400040000000,
          "val": 193.48
        },
        {
          "col": "High",
          "idx": 1400126400000,
          "val": 192.66
        },
        {
          "col": "High",
          "idx": 1400212800000,
          "val": 192.04
        },
        {
          "col": "High",
          "idx": 1400472000000,
          "val": 196.89
        },
        {
          "col": "High",
          "idx": 1400558400000,
          "val": 199.33
        },
        {
          "col": "High",
          "idx": 1400644800000,
          "val": 199.87
        },
        {
          "col": "High",
          "idx": 1400731200000,
          "val": 206.88
        },
        {
          "col": "High",
          "idx": 1400817600000,
          "val": 207.76
        },
        {
          "col": "High",
          "idx": 1401163200000,
          "val": 213.87
        },
        {
          "col": "High",
          "idx": 1401249600000,
          "val": 212.77
        },
        {
          "col": "High",
          "idx": 1401336000000,
          "val": 212.49
        },
        {
          "col": "High",
          "idx": 1401422400000,
          "val": 214.8
        },
        {
          "col": "High",
          "idx": 1401681600000,
          "val": 209.35
        },
        {
          "col": "High",
          "idx": 1401768000000,
          "val": 208.0
        },
        {
          "col": "High",
          "idx": 1401854400000,
          "val": 206.26
        },
        {
          "col": "High",
          "idx": 1401940800000,
          "val": 209.2
        },
        {
          "col": "High",
          "idx": 1402027200000,
          "val": 210.81
        },
        {
          "col": "High",
          "idx": 1402286400000,
          "val": 209.99
        },
        {
          "col": "High",
          "idx": 1402372800000,
          "val": 206.97
        },
        {
          "col": "High",
          "idx": 1402459200000,
          "val": 205.0
        },
        {
          "col": "High",
          "idx": 1402545600000,
          "val": 209.88
        },
        {
          "col": "High",
          "idx": 1402632000000,
          "val": 206.79
        },
        {
          "col": "High",
          "idx": 1402891200000,
          "val": 225.49
        },
        {
          "col": "High",
          "idx": 1402977600000,
          "val": 235.54
        },
        {
          "col": "High",
          "idx": 1403064000000,
          "val": 231.71
        },
        {
          "col": "High",
          "idx": 1403150400000,
          "val": 235.31
        },
        {
          "col": "High",
          "idx": 1403236800000,
          "val": 231.29
        },
        {
          "col": "High",
          "idx": 1403496000000,
          "val": 238.99
        },
        {
          "col": "High",
          "idx": 1403582400000,
          "val": 241.88
        },
        {
          "col": "High",
          "idx": 1403668800000,
          "val": 237.55
        },
        {
          "col": "High",
          "idx": 1403755200000,
          "val": 240.4
        },
        {
          "col": "High",
          "idx": 1403841600000,
          "val": 240.0
        },
        {
          "col": "High",
          "idx": 1404100800000,
          "val": 244.49
        },
        {
          "col": "High",
          "idx": 1404187200000,
          "val": 243.44
        },
        {
          "col": "High",
          "idx": 1404273600000,
          "val": 242.33
        },
        {
          "col": "High",
          "idx": 1404360000000,
          "val": 231.9
        },
        {
          "col": "High",
          "idx": 1404705600000,
          "val": 229.78
        },
        {
          "col": "High",
          "idx": 1404792000000,
          "val": 220.96
        },
        {
          "col": "High",
          "idx": 1404878400000,
          "val": 224.22
        },
        {
          "col": "High",
          "idx": 1404964800000,
          "val": 222.22
        },
        {
          "col": "High",
          "idx": 1405051200000,
          "val": 221.6
        },
        {
          "col": "High",
          "idx": 1405310400000,
          "val": 228.79
        },
        {
          "col": "High",
          "idx": 1405396800000,
          "val": 227.65
        },
        {
          "col": "High",
          "idx": 1405483200000,
          "val": 224.8
        },
        {
          "col": "High",
          "idx": 1405569600000,
          "val": 220.55
        },
        {
          "col": "High",
          "idx": 1405656000000,
          "val": 221.21
        },
        {
          "col": "High",
          "idx": 1405915200000,
          "val": 223.21
        },
        {
          "col": "High",
          "idx": 1406001600000,
          "val": 223.3
        },
        {
          "col": "High",
          "idx": 1406088000000,
          "val": 224.75
        },
        {
          "col": "High",
          "idx": 1406174400000,
          "val": 225.1
        },
        {
          "col": "High",
          "idx": 1406260800000,
          "val": 226.97
        },
        {
          "col": "High",
          "idx": 1406520000000,
          "val": 232.0
        },
        {
          "col": "High",
          "idx": 1406606400000,
          "val": 228.3
        },
        {
          "col": "High",
          "idx": 1406692800000,
          "val": 229.6
        },
        {
          "col": "High",
          "idx": 1406779200000,
          "val": 231.4
        },
        {
          "col": "High",
          "idx": 1406865600000,
          "val": 237.5
        },
        {
          "col": "High",
          "idx": 1407124800000,
          "val": 240.5
        },
        {
          "col": "High",
          "idx": 1407211200000,
          "val": 242.99
        },
        {
          "col": "High",
          "idx": 1407297600000,
          "val": 251.42
        },
        {
          "col": "High",
          "idx": 1407384000000,
          "val": 256.69
        },
        {
          "col": "High",
          "idx": 1407470400000,
          "val": 251.76
        },
        {
          "col": "High",
          "idx": 1407729600000,
          "val": 263.74
        },
        {
          "col": "High",
          "idx": 1407816000000,
          "val": 260.3
        },
        {
          "col": "High",
          "idx": 1407902400000,
          "val": 265.64
        },
        {
          "col": "High",
          "idx": 1407988800000,
          "val": 263.0
        },
        {
          "col": "High",
          "idx": 1408075200000,
          "val": 262.09
        },
        {
          "col": "High",
          "idx": 1408334400000,
          "val": 267.26
        },
        {
          "col": "High",
          "idx": 1408420800000,
          "val": 259.33
        },
        {
          "col": "High",
          "idx": 1408507200000,
          "val": 258.74
        },
        {
          "col": "High",
          "idx": 1408593600000,
          "val": 258.8
        },
        {
          "col": "High",
          "idx": 1408680000000,
          "val": 256.95
        }
      ]
    }
  ],
  "height": 250,
  "legends": [],
  "marks": [
    {
      "from": {
        "data": "table",
        "transform": [
          {
            "keys": [
              "data.col"
            ],
            "type": "facet"
          }
        ]
      },
      "marks": [
        {
          "properties": {
            "enter": {
              "stroke": {
                "field": "data.col",
                "scale": "color"
              },
              "strokeWidth": {
                "value": 2
              },
              "x": {
                "field": "data.idx",
                "scale": "x"
              },
              "y": {
                "field": "data.val",
                "scale": "y"
              }
            }
          },
          "type": "line"
        }
      ],
      "type": "group"
    }
  ],
  "padding": "auto",
  "scales": [
    {
      "domain": {
        "data": "table",
        "field": "data.idx"
      },
      "name": "x",
      "range": "width",
      "type": "time"
    },
    {
      "domain": {
        "data": "table",
        "field": "data.val"
      },
      "name": "y",
      "nice": true,
      "range": "height"
    },
    {
      "domain": {
        "data": "table",
        "field": "data.col"
      },
      "name": "color",
      "range": "category20",
      "type": "ordinal"
    }
  ],
  "width": 500
}

function parse(spec) {
  vg.parse.spec(spec, function(chart) { chart({el:"#vis"}).update(); });
}
parse(line_spec);